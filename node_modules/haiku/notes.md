

# haiku [![Build Status](https://travis-ci.org/jxson/haiku.png?branch=master)](https://travis-ci.org/jxson/haiku)

`haiku` is a tool for generating and rendering static sites from simple text files.

## Features

* Configurable directory structure with obvious defaults
* All content is written in simple text files
* Uses the mustache template language
* Meta data is added to pages with front-matter
* Template data is available to any page - arbitrary metadata can be included in articles files, and accessed from the templates.
* Markdown files get automatically compiled to html
* Pages without a .md extension will still be passed through the default markdown parser
* urls map directly to the filesystem, no surprises or guessing the file in content/foo/bar.md will have the url /foo/bar.html

* it's fast
* markdown support
* not blog focused, create any type of site documentation, event pages, api clients
* mustache template processing even inside your MD
* local dev server
* pages have access to any templates you create, not just layouts
* available as a node.js lib to use in your code/ servers
* initially built for deploying to s3, but can be deployed anywhere that can serve static html assets

## Incomplete

* Automatic css pre-compiling
* pluggable parsers/ transforms
* init command to create the default dirs and a few starter templates

# Example

# Methods

    var haiku = require('haiku')

## haiku(src)

# Install

With [npm][npm] do:

    npm install haiku -g

# License (MIT)

Copyright (c) Jason Campbell ("Author")

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.


========================================================================

https://github.com/mojombo/jekyll/wiki/configuration
https://npmjs.org/package/optipng
https://npmjs.org/package/jpegtran

- Do something like this for haiku

"This function returns a new instance of LevelUP and will also initiate an open() operation. Opening the database is an asynchronous operation which will trigger your callback if you provide one. The callback should take the form: function (err, db) {} where the db is the LevelUP instance. If you don't provide a callback, any read & write operations are simply queued internally until the database is fully opened."

haiku(src, opts)

haiku.find('/', function(err, page){
  if (err) res.error(err)
  if (! page) res.error('no haiku page')

  page.render(function(err, out){
    if (err) res.error(err)
    res.end(out)
  })
})

http://alexsexton.com/blog/2013/04/understanding-javascript-inheritance/?utm_source=javascriptweekly&utm_medium=email

Use a proxy to define the haiku on the page

raw body
mustached body
processed body (markdown)
layout applied body

using methods instead of setters and getters might be better

// describe('haiku["content-dir"]', function(){
//   before(function(){
//     haiku.reset()
//   })
//
//   it('defaults to an absolute "content" path', function(){
//     assert.equal(haiku['content-dir']
//     , path.join(haiku.root, 'content'))
//   })
//
//   it('is settable', function(){
//     haiku['content-dir'] = '/some/place/else'
//
//     assert.equal(haiku['content-dir'], '/some/place/else')
//   })
//
//   it('adheres to the robustness principle', function(){
//     haiku['content-dir'] = '../idunno'
//
//     assert.equal(haiku['content-dir'], path.resolve('../idunno'))
//   })
// })

//   '`buildDir` should be "build"': function(options){
//     assert.ok(options.buildDir);
//     assert.equal(options.buildDir, 'build');
//   },
//   '`contentDir` should be "content"': function(options){
//     assert.ok(options.contentDir);
//     assert.equal(options.contentDir, 'content');
//   },
//   '`templatesDir` should be "templates"': function(options){
//     assert.ok(options.templatesDir);
//     assert.equal(options.templatesDir, 'templates');
//   },
//   '`publicDir` should be "public"': function(options){
//     assert.ok(options.publicDir);
//     assert.equal(options.publicDir, 'public');
//   },
//   '`index` should be "index"': function(options){
//     assert.ok(options.index);
//     assert.equal(options.index, 'index.html');
//   },
// },
// '*default* `directories`': {
//   topic: function(site){
//     return site.directories;
//   },
//   'has property `content`': function(directories){
//     var _path = path.join(process.cwd(), 'content');
//
//     assert.include(directories, 'content');
//     assert.equal(directories.content, _path);
//   },
//   'has property `templates`': function(directories){
//     var _path = path.join(process.cwd(), 'templates');
//
//     assert.include(directories, 'templates');
//     assert.equal(directories.templates, _path);
//   },
//   'has property `public`': function(directories){
//     var _path = path.join(process.cwd(), 'public');
//
//     assert.include(directories, 'public');
//     assert.equal(directories.public, _path);
//   }
// },

